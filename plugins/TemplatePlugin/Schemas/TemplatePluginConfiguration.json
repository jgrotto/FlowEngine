{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Template Plugin Configuration",
  "description": "Configuration schema for FlowEngine Template Plugin",
  "type": "object",
  "required": ["RowCount", "BatchSize"],
  "properties": {
    "RowCount": {
      "type": "integer",
      "minimum": 1,
      "maximum": 5000000,
      "description": "Number of rows to generate",
      "examples": [100, 1000, 10000]
    },
    "BatchSize": {
      "type": "integer", 
      "minimum": 1,
      "maximum": 50000,
      "description": "Rows per batch for processing optimization",
      "examples": [100, 500, 1000]
    },
    "DataType": {
      "type": "string",
      "enum": ["TestData", "Random", "Sequential"],
      "default": "TestData",
      "description": "Type of data to generate",
      "examples": ["TestData", "Random", "Sequential"]
    },
    "DelayMs": {
      "type": "integer",
      "minimum": 0,
      "maximum": 5000,
      "default": 0,
      "description": "Delay in milliseconds between batch processing (for simulation purposes)",
      "examples": [0, 10, 100]
    },
    "OutputSchema": {
      "type": ["object", "null"],
      "description": "Schema definition for output data (optional)",
      "properties": {
        "Columns": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["Name", "Type", "Index"],
            "properties": {
              "Name": {
                "type": "string",
                "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$",
                "description": "Column name (must be valid identifier)"
              },
              "Type": {
                "type": "string",
                "enum": ["int32", "string", "decimal", "datetime", "datetimeoffset", "bool"],
                "description": "Data type of the column"
              },
              "Index": {
                "type": "integer",
                "minimum": 0,
                "description": "Zero-based index for ArrayRow optimization"
              },
              "Required": {
                "type": "boolean",
                "default": true,
                "description": "Whether the column is required (non-nullable)"
              }
            }
          }
        }
      },
      "required": ["Columns"]
    }
  },
  "additionalProperties": true,
  "examples": [
    {
      "RowCount": 1000,
      "BatchSize": 100,
      "DataType": "TestData",
      "DelayMs": 10,
      "OutputSchema": {
        "Columns": [
          {
            "Name": "Id",
            "Type": "int32",
            "Index": 0,
            "Required": true
          },
          {
            "Name": "Name",
            "Type": "string",
            "Index": 1,
            "Required": true
          },
          {
            "Name": "Category",
            "Type": "string",
            "Index": 2,
            "Required": true
          },
          {
            "Name": "Price",
            "Type": "decimal",
            "Index": 3,
            "Required": false
          },
          {
            "Name": "Timestamp",
            "Type": "datetimeoffset",
            "Index": 4,
            "Required": true
          }
        ]
      }
    }
  ]
}